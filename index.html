<html><head><title>blog list</title>
            <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
            <script src="markdown.js"></script>
</head>

<body>

	<div id='summary'>
    <ul id="posts">

    </ul>
	</div>

  <div id="content">
    <!--post content goes here-->
  </div>

<script type="text/javascript">
  $(document).ready(function() {

    $.getJSON( "https://api.github.com/repos/shapeoko/shapeokoblog/contents/", function( data ) {
      var items = [];
      $.each( data, function( key, val ) {

        //grab the filename with extension
        var file = val.name;
        var extension = file.substr( (file.lastIndexOf('.') +1) );
        
        //only add to list if file is markdown
        if(extension == "md"){
          $("#posts").append("<li id='" + val.path + "'>" + val.name + ":" + val.url + "</li>" )
        }
      });
    });

    //bind click event to list
    $('#posts li').on('click', function() {
        var clickedPost;
        clickedPost = $(this).attr('id');
        displayPost(clickedPost);
    });

  });
</script>

<script>

</script>
<script>
            function displayPost(postPath){
              //clear the div before displaying blog post
              $("#content").empty();


                $.ajax({
                  //change this path to the appropriate markdown file
                  url:postPath,
                  dataType: "text",
                  success: function(response){
                      
                      //here is the magic. convert markdown to html, inject it into content div
                      $("#content").append(markdown.toHTML(response));
                    }
                });

            };
</script>

</body></html>